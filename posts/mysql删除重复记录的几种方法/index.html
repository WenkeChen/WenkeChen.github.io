<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>MySQLåˆ é™¤é‡å¤è®°å½•çš„å‡ ç§æ–¹æ³• | wenkechen</title>
<meta name=keywords content="MySQL"><meta name=description content='é—®é¢˜ è¿™é‡Œæœ‰è¿™ä¹ˆä¸€å¼ å­¦ç”Ÿä¿¡æ¯è¡¨ï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š
CREATE TABLE `students` ( `id` int UNSIGNED NOT NULL AUTO_INCREMENT, `name` varchar(30) NOT NULL, `gender` tinyint(1) UNSIGNED NOT NULL, `age` int UNSIGNED NOT NULL, PRIMARY KEY (`id`) ); ç°name,gender,ageä¸‰ä¸ªå­—æ®µå‡ç›¸åŒï¼Œåˆ™å¯è®¤å®šè¿™æ˜¯åŒä¸€ä¸ªå­¦ç”Ÿï¼›ä½†æ˜¯ç”±äºè¡¨æ²¡æœ‰åŠ è”åˆå”¯ä¸€ç´¢å¼•ï¼Œæ‰€ä»¥è¡¨é‡Œé¢æœ‰å¾ˆå¤šé‡å¤çš„è®°å½•ï¼Œæ€ä¹ˆæ ·ä½¿ç›¸åŒçš„è®°å½•åªä¿ç•™ä¸€æ¡ï¼Ÿ
è§£ç­” è‹¥æ˜¯æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¤§å¯ç”¨group byç„¶åhaving countæˆ–è€…distinctæ¥åˆå¹¶æŸ¥è¯¢ä¸€æ¡ï¼Œä½†æ˜¯åˆ é™¤å¥½ä¼¼æ²¡æœ‰è¿™æ ·æ–¹ä¾¿çš„è¯­å¥ã€‚æ‰€ä»¥æ€»ç»“äº†ä¸€äº›æ¯”è¾ƒå¥½çš„æ–¹æ³•ï¼š
åˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼• è¿™æ˜¯æœ€ç®€å•æ–¹ä¾¿çš„ä¸€æ¡äº†
ALTER IGNORE TABLE students ADD UNIQUE INDEX idx_name_gender_age (name, gender, age); æ³¨æ„è¿™ä¸ªIGNOREï¼Œç”±äºè¡¨é‡Œé¢å·²ç»æœ‰é‡å¤è®°å½•äº†ï¼Œæ‰€ä»¥ç›´æ¥åˆ›å»ºä¼šå‡ºç°é”™è¯¯ã€‚æ‰§è¡Œä¹‹åï¼Œæ‰€æœ‰çš„é‡å¤è®°å½•éƒ½ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼ˆåªä¿ç•™ä¸€æ¡ï¼‰ï¼Œè€Œä¸”ä»¥åä¹Ÿæ— æ³•æ’å…¥é‡å¤è®°å½•äº†ã€‚
è‡ªå…³è” å¦‚æœä½ æ²¡æœ‰ä¿®æ”¹æ•°æ®åº“ç»“æ„çš„æƒé™ï¼Œé‚£ä¸‹é¢è¿™æ¡è‚¯å®šé€‚åˆä½ 
DELETE `a` FROM `students` AS `a`, `students` AS `b` WHERE -- IMPORTANT: Ensures one version remains -- Change "ID" to your unique column&#39;s name `a`.'><meta name=author content="WenkeChen"><link rel=canonical href=https://wksama.github.io/posts/mysql%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/><meta name=google-site-verification content="5qPbseAOG3zr_auAjX6vFWkZZaOjD409lzGZUNlgKjo"><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2eadbb982468c11a433a3e291f01326f2ba43f065e256bf792dbd79640a92316.js integrity="sha256-Lq27mCRowRpDOj4pHwEybyukPwZeJWv3ktvXlkCpIxY=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://ae01.alicdn.com/kf/H316b426e16a44015b29c0a8faf8e6ba3P.png><link rel=icon type=image/png sizes=16x16 href=https://wksama.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://wksama.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://wksama.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://wksama.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.124.1"><link rel=alternate hreflang=en href=https://wksama.github.io/posts/mysql%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZLVK1276CF"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZLVK1276CF",{anonymize_ip:!1})}</script><meta property="og:title" content="MySQLåˆ é™¤é‡å¤è®°å½•çš„å‡ ç§æ–¹æ³•"><meta property="og:description" content='é—®é¢˜ è¿™é‡Œæœ‰è¿™ä¹ˆä¸€å¼ å­¦ç”Ÿä¿¡æ¯è¡¨ï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š
CREATE TABLE `students` ( `id` int UNSIGNED NOT NULL AUTO_INCREMENT, `name` varchar(30) NOT NULL, `gender` tinyint(1) UNSIGNED NOT NULL, `age` int UNSIGNED NOT NULL, PRIMARY KEY (`id`) ); ç°name,gender,ageä¸‰ä¸ªå­—æ®µå‡ç›¸åŒï¼Œåˆ™å¯è®¤å®šè¿™æ˜¯åŒä¸€ä¸ªå­¦ç”Ÿï¼›ä½†æ˜¯ç”±äºè¡¨æ²¡æœ‰åŠ è”åˆå”¯ä¸€ç´¢å¼•ï¼Œæ‰€ä»¥è¡¨é‡Œé¢æœ‰å¾ˆå¤šé‡å¤çš„è®°å½•ï¼Œæ€ä¹ˆæ ·ä½¿ç›¸åŒçš„è®°å½•åªä¿ç•™ä¸€æ¡ï¼Ÿ
è§£ç­” è‹¥æ˜¯æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¤§å¯ç”¨group byç„¶åhaving countæˆ–è€…distinctæ¥åˆå¹¶æŸ¥è¯¢ä¸€æ¡ï¼Œä½†æ˜¯åˆ é™¤å¥½ä¼¼æ²¡æœ‰è¿™æ ·æ–¹ä¾¿çš„è¯­å¥ã€‚æ‰€ä»¥æ€»ç»“äº†ä¸€äº›æ¯”è¾ƒå¥½çš„æ–¹æ³•ï¼š
åˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼• è¿™æ˜¯æœ€ç®€å•æ–¹ä¾¿çš„ä¸€æ¡äº†
ALTER IGNORE TABLE students ADD UNIQUE INDEX idx_name_gender_age (name, gender, age); æ³¨æ„è¿™ä¸ªIGNOREï¼Œç”±äºè¡¨é‡Œé¢å·²ç»æœ‰é‡å¤è®°å½•äº†ï¼Œæ‰€ä»¥ç›´æ¥åˆ›å»ºä¼šå‡ºç°é”™è¯¯ã€‚æ‰§è¡Œä¹‹åï¼Œæ‰€æœ‰çš„é‡å¤è®°å½•éƒ½ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼ˆåªä¿ç•™ä¸€æ¡ï¼‰ï¼Œè€Œä¸”ä»¥åä¹Ÿæ— æ³•æ’å…¥é‡å¤è®°å½•äº†ã€‚
è‡ªå…³è” å¦‚æœä½ æ²¡æœ‰ä¿®æ”¹æ•°æ®åº“ç»“æ„çš„æƒé™ï¼Œé‚£ä¸‹é¢è¿™æ¡è‚¯å®šé€‚åˆä½ 
DELETE `a` FROM `students` AS `a`, `students` AS `b` WHERE -- IMPORTANT: Ensures one version remains -- Change "ID" to your unique column&#39;s name `a`.'><meta property="og:type" content="article"><meta property="og:url" content="https://wksama.github.io/posts/mysql%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/"><meta property="og:image" content="https://wksama.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-10T17:47:05+08:00"><meta property="article:modified_time" content="2022-02-10T17:47:05+08:00"><meta property="og:site_name" content="WenkeChen"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wksama.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="MySQLåˆ é™¤é‡å¤è®°å½•çš„å‡ ç§æ–¹æ³•"><meta name=twitter:description content='é—®é¢˜ è¿™é‡Œæœ‰è¿™ä¹ˆä¸€å¼ å­¦ç”Ÿä¿¡æ¯è¡¨ï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š
CREATE TABLE `students` ( `id` int UNSIGNED NOT NULL AUTO_INCREMENT, `name` varchar(30) NOT NULL, `gender` tinyint(1) UNSIGNED NOT NULL, `age` int UNSIGNED NOT NULL, PRIMARY KEY (`id`) ); ç°name,gender,ageä¸‰ä¸ªå­—æ®µå‡ç›¸åŒï¼Œåˆ™å¯è®¤å®šè¿™æ˜¯åŒä¸€ä¸ªå­¦ç”Ÿï¼›ä½†æ˜¯ç”±äºè¡¨æ²¡æœ‰åŠ è”åˆå”¯ä¸€ç´¢å¼•ï¼Œæ‰€ä»¥è¡¨é‡Œé¢æœ‰å¾ˆå¤šé‡å¤çš„è®°å½•ï¼Œæ€ä¹ˆæ ·ä½¿ç›¸åŒçš„è®°å½•åªä¿ç•™ä¸€æ¡ï¼Ÿ
è§£ç­” è‹¥æ˜¯æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¤§å¯ç”¨group byç„¶åhaving countæˆ–è€…distinctæ¥åˆå¹¶æŸ¥è¯¢ä¸€æ¡ï¼Œä½†æ˜¯åˆ é™¤å¥½ä¼¼æ²¡æœ‰è¿™æ ·æ–¹ä¾¿çš„è¯­å¥ã€‚æ‰€ä»¥æ€»ç»“äº†ä¸€äº›æ¯”è¾ƒå¥½çš„æ–¹æ³•ï¼š
åˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼• è¿™æ˜¯æœ€ç®€å•æ–¹ä¾¿çš„ä¸€æ¡äº†
ALTER IGNORE TABLE students ADD UNIQUE INDEX idx_name_gender_age (name, gender, age); æ³¨æ„è¿™ä¸ªIGNOREï¼Œç”±äºè¡¨é‡Œé¢å·²ç»æœ‰é‡å¤è®°å½•äº†ï¼Œæ‰€ä»¥ç›´æ¥åˆ›å»ºä¼šå‡ºç°é”™è¯¯ã€‚æ‰§è¡Œä¹‹åï¼Œæ‰€æœ‰çš„é‡å¤è®°å½•éƒ½ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼ˆåªä¿ç•™ä¸€æ¡ï¼‰ï¼Œè€Œä¸”ä»¥åä¹Ÿæ— æ³•æ’å…¥é‡å¤è®°å½•äº†ã€‚
è‡ªå…³è” å¦‚æœä½ æ²¡æœ‰ä¿®æ”¹æ•°æ®åº“ç»“æ„çš„æƒé™ï¼Œé‚£ä¸‹é¢è¿™æ¡è‚¯å®šé€‚åˆä½ 
DELETE `a` FROM `students` AS `a`, `students` AS `b` WHERE -- IMPORTANT: Ensures one version remains -- Change "ID" to your unique column&#39;s name `a`.'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wksama.github.io/posts/"},{"@type":"ListItem","position":2,"name":"MySQLåˆ é™¤é‡å¤è®°å½•çš„å‡ ç§æ–¹æ³•","item":"https://wksama.github.io/posts/mysql%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"MySQLåˆ é™¤é‡å¤è®°å½•çš„å‡ ç§æ–¹æ³•","name":"MySQLåˆ é™¤é‡å¤è®°å½•çš„å‡ ç§æ–¹æ³•","description":"é—®é¢˜ è¿™é‡Œæœ‰è¿™ä¹ˆä¸€å¼ å­¦ç”Ÿä¿¡æ¯è¡¨ï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š\nCREATE TABLE `students` ( `id` int UNSIGNED NOT NULL AUTO_INCREMENT, `name` varchar(30) NOT NULL, `gender` tinyint(1) UNSIGNED NOT NULL, `age` int UNSIGNED NOT NULL, PRIMARY KEY (`id`) ); ç°name,gender,ageä¸‰ä¸ªå­—æ®µå‡ç›¸åŒï¼Œåˆ™å¯è®¤å®šè¿™æ˜¯åŒä¸€ä¸ªå­¦ç”Ÿï¼›ä½†æ˜¯ç”±äºè¡¨æ²¡æœ‰åŠ è”åˆå”¯ä¸€ç´¢å¼•ï¼Œæ‰€ä»¥è¡¨é‡Œé¢æœ‰å¾ˆå¤šé‡å¤çš„è®°å½•ï¼Œæ€ä¹ˆæ ·ä½¿ç›¸åŒçš„è®°å½•åªä¿ç•™ä¸€æ¡ï¼Ÿ\nè§£ç­” è‹¥æ˜¯æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¤§å¯ç”¨group byç„¶åhaving countæˆ–è€…distinctæ¥åˆå¹¶æŸ¥è¯¢ä¸€æ¡ï¼Œä½†æ˜¯åˆ é™¤å¥½ä¼¼æ²¡æœ‰è¿™æ ·æ–¹ä¾¿çš„è¯­å¥ã€‚æ‰€ä»¥æ€»ç»“äº†ä¸€äº›æ¯”è¾ƒå¥½çš„æ–¹æ³•ï¼š\nåˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼• è¿™æ˜¯æœ€ç®€å•æ–¹ä¾¿çš„ä¸€æ¡äº†\nALTER IGNORE TABLE students ADD UNIQUE INDEX idx_name_gender_age (name, gender, age); æ³¨æ„è¿™ä¸ªIGNOREï¼Œç”±äºè¡¨é‡Œé¢å·²ç»æœ‰é‡å¤è®°å½•äº†ï¼Œæ‰€ä»¥ç›´æ¥åˆ›å»ºä¼šå‡ºç°é”™è¯¯ã€‚æ‰§è¡Œä¹‹åï¼Œæ‰€æœ‰çš„é‡å¤è®°å½•éƒ½ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼ˆåªä¿ç•™ä¸€æ¡ï¼‰ï¼Œè€Œä¸”ä»¥åä¹Ÿæ— æ³•æ’å…¥é‡å¤è®°å½•äº†ã€‚\nè‡ªå…³è” å¦‚æœä½ æ²¡æœ‰ä¿®æ”¹æ•°æ®åº“ç»“æ„çš„æƒé™ï¼Œé‚£ä¸‹é¢è¿™æ¡è‚¯å®šé€‚åˆä½ \nDELETE `a` FROM `students` AS `a`, `students` AS `b` WHERE -- IMPORTANT: Ensures one version remains -- Change \u0026#34;ID\u0026#34; to your unique column\u0026#39;s name `a`.","keywords":["MySQL"],"articleBody":"é—®é¢˜ è¿™é‡Œæœ‰è¿™ä¹ˆä¸€å¼ å­¦ç”Ÿä¿¡æ¯è¡¨ï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š\nCREATE TABLE `students` ( `id` int UNSIGNED NOT NULL AUTO_INCREMENT, `name` varchar(30) NOT NULL, `gender` tinyint(1) UNSIGNED NOT NULL, `age` int UNSIGNED NOT NULL, PRIMARY KEY (`id`) ); ç°name,gender,ageä¸‰ä¸ªå­—æ®µå‡ç›¸åŒï¼Œåˆ™å¯è®¤å®šè¿™æ˜¯åŒä¸€ä¸ªå­¦ç”Ÿï¼›ä½†æ˜¯ç”±äºè¡¨æ²¡æœ‰åŠ è”åˆå”¯ä¸€ç´¢å¼•ï¼Œæ‰€ä»¥è¡¨é‡Œé¢æœ‰å¾ˆå¤šé‡å¤çš„è®°å½•ï¼Œæ€ä¹ˆæ ·ä½¿ç›¸åŒçš„è®°å½•åªä¿ç•™ä¸€æ¡ï¼Ÿ\nè§£ç­” è‹¥æ˜¯æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¤§å¯ç”¨group byç„¶åhaving countæˆ–è€…distinctæ¥åˆå¹¶æŸ¥è¯¢ä¸€æ¡ï¼Œä½†æ˜¯åˆ é™¤å¥½ä¼¼æ²¡æœ‰è¿™æ ·æ–¹ä¾¿çš„è¯­å¥ã€‚æ‰€ä»¥æ€»ç»“äº†ä¸€äº›æ¯”è¾ƒå¥½çš„æ–¹æ³•ï¼š\nåˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼• è¿™æ˜¯æœ€ç®€å•æ–¹ä¾¿çš„ä¸€æ¡äº†\nALTER IGNORE TABLE students ADD UNIQUE INDEX idx_name_gender_age (name, gender, age); æ³¨æ„è¿™ä¸ªIGNOREï¼Œç”±äºè¡¨é‡Œé¢å·²ç»æœ‰é‡å¤è®°å½•äº†ï¼Œæ‰€ä»¥ç›´æ¥åˆ›å»ºä¼šå‡ºç°é”™è¯¯ã€‚æ‰§è¡Œä¹‹åï¼Œæ‰€æœ‰çš„é‡å¤è®°å½•éƒ½ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼ˆåªä¿ç•™ä¸€æ¡ï¼‰ï¼Œè€Œä¸”ä»¥åä¹Ÿæ— æ³•æ’å…¥é‡å¤è®°å½•äº†ã€‚\nè‡ªå…³è” å¦‚æœä½ æ²¡æœ‰ä¿®æ”¹æ•°æ®åº“ç»“æ„çš„æƒé™ï¼Œé‚£ä¸‹é¢è¿™æ¡è‚¯å®šé€‚åˆä½ \nDELETE `a` FROM `students` AS `a`, `students` AS `b` WHERE -- IMPORTANT: Ensures one version remains -- Change \"ID\" to your unique column's name `a`.`id` \u003e `b`.`id` -- Any duplicates you want to check for AND (`a`.`name` = `b`.`name` OR `a`.`name` IS NULL AND `b`.`name` IS NULL) AND (`a`.`gender` = `b`.`gender` OR `a`.`gender` IS NULL AND `b`.`gender` IS NULL) AND (`a`.`age` = `b`.`age` OR `a`.`age` IS NULL AND `b`.`age` IS NULL); è¿™æ ·ï¼Œå°±ä¼šåªä¿ç•™idæœ€å°çš„é‚£ä¸€æ¡è®°å½•äº†ã€‚\nå¤åˆ¶è¡¨ åˆ›å»ºä¸€ä¸ªè¡¨ç»“æ„å®Œå…¨ä¸€æ ·çš„æ–°è¡¨students_copyï¼Œå–å‡ºåŸè¡¨ä¸­ä¸é‡å¤çš„è®°å½•ï¼Œå¡å…¥è¿™ä¸ªæ–°è¡¨ä¸­ï¼Œå°†æ—§è¡¨æ”¹åæˆ–åˆ é™¤ï¼Œå°†æ–°è¡¨æ”¹ä¸ºstudentsã€‚\næ€»ç»“ èƒ½æ”¹è¡¨ç»“æ„çš„è¯æˆ‘é€‰ç¬¬ä¸€ç§ï¼Œä¸èƒ½çš„è¯æˆ‘é€‰ç¬¬äºŒç§ğŸ˜…ï¼Œä¸ç®¡å“ªä¸€ç§ï¼Œæ“ä½œå‰åŠ¡å¿…åšå¥½æ•°æ®å¤‡ä»½ğŸ¤£ã€‚\n","wordCount":"127","inLanguage":"en","datePublished":"2022-02-10T17:47:05+08:00","dateModified":"2022-02-10T17:47:05+08:00","author":{"@type":"Person","name":"WenkeChen"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wksama.github.io/posts/mysql%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/"},"publisher":{"@type":"Organization","name":"wenkechen","logo":{"@type":"ImageObject","url":"https://ae01.alicdn.com/kf/H316b426e16a44015b29c0a8faf8e6ba3P.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wksama.github.io/ accesskey=h title="Wenke (Alt + H)">Wenke</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></span></div><ul id=menu><li><a href=https://wksama.github.io/ title=home><span>home</span></a></li><li><a href=https://wksama.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://wksama.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wksama.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://wksama.github.io/posts/>Posts</a></div><h1 class=post-title>MySQLåˆ é™¤é‡å¤è®°å½•çš„å‡ ç§æ–¹æ³•</h1><div class=post-meta>&lt;span title='2022-02-10 17:47:05 +0800 +0800'>February 10, 2022&lt;/span>&amp;nbsp;Â·&amp;nbsp;1 min&amp;nbsp;Â·&amp;nbsp;WenkeChen&nbsp;|&nbsp;<a href=https://github.com/wenkechen/wksama.github.io/blob/master/content/posts/MySQL%e5%88%a0%e9%99%a4%e9%87%8d%e5%a4%8d%e8%ae%b0%e5%bd%95%e7%9a%84%e5%87%a0%e7%a7%8d%e6%96%b9%e6%b3%95.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e9%97%ae%e9%a2%98 aria-label=é—®é¢˜>é—®é¢˜</a></li><li><a href=#%e8%a7%a3%e7%ad%94 aria-label=è§£ç­”>è§£ç­”</a><ul><li><a href=#%e5%88%9b%e5%bb%ba%e8%81%94%e5%90%88%e5%94%af%e4%b8%80%e7%b4%a2%e5%bc%95 aria-label=åˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼•>åˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼•</a></li><li><a href=#%e8%87%aa%e5%85%b3%e8%81%94 aria-label=è‡ªå…³è”>è‡ªå…³è”</a></li><li><a href=#%e5%a4%8d%e5%88%b6%e8%a1%a8 aria-label=å¤åˆ¶è¡¨>å¤åˆ¶è¡¨</a></li><li><a href=#%e6%80%bb%e7%bb%93 aria-label=æ€»ç»“>æ€»ç»“</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=é—®é¢˜>é—®é¢˜<a hidden class=anchor aria-hidden=true href=#é—®é¢˜>#</a></h2><p>è¿™é‡Œæœ‰è¿™ä¹ˆä¸€å¼ å­¦ç”Ÿä¿¡æ¯è¡¨ï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>`</span>students<span style=color:#f92672>`</span>  (
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>id<span style=color:#f92672>`</span> <span style=color:#66d9ef>int</span> <span style=color:#66d9ef>UNSIGNED</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>AUTO_INCREMENT</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>name<span style=color:#f92672>`</span> <span style=color:#66d9ef>varchar</span>(<span style=color:#ae81ff>30</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>gender<span style=color:#f92672>`</span> <span style=color:#66d9ef>tinyint</span>(<span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>UNSIGNED</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>age<span style=color:#f92672>`</span> <span style=color:#66d9ef>int</span> <span style=color:#66d9ef>UNSIGNED</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> (<span style=color:#f92672>`</span>id<span style=color:#f92672>`</span>)
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p>ç°<code>name</code>,<code>gender</code>,<code>age</code>ä¸‰ä¸ªå­—æ®µå‡ç›¸åŒï¼Œåˆ™å¯è®¤å®šè¿™æ˜¯åŒä¸€ä¸ªå­¦ç”Ÿï¼›ä½†æ˜¯ç”±äºè¡¨æ²¡æœ‰åŠ è”åˆå”¯ä¸€ç´¢å¼•ï¼Œæ‰€ä»¥è¡¨é‡Œé¢æœ‰å¾ˆå¤šé‡å¤çš„è®°å½•ï¼Œæ€ä¹ˆæ ·ä½¿ç›¸åŒçš„è®°å½•åªä¿ç•™ä¸€æ¡ï¼Ÿ</p><h2 id=è§£ç­”>è§£ç­”<a hidden class=anchor aria-hidden=true href=#è§£ç­”>#</a></h2><p>è‹¥æ˜¯æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¤§å¯ç”¨<code>group by</code>ç„¶å<code>having count</code>æˆ–è€…<code>distinct</code>æ¥åˆå¹¶æŸ¥è¯¢ä¸€æ¡ï¼Œä½†æ˜¯åˆ é™¤å¥½ä¼¼æ²¡æœ‰è¿™æ ·æ–¹ä¾¿çš„è¯­å¥ã€‚æ‰€ä»¥æ€»ç»“äº†ä¸€äº›æ¯”è¾ƒå¥½çš„æ–¹æ³•ï¼š</p><h3 id=åˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼•>åˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼•<a hidden class=anchor aria-hidden=true href=#åˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼•>#</a></h3><p>è¿™æ˜¯æœ€ç®€å•æ–¹ä¾¿çš„ä¸€æ¡äº†</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>IGNORE</span> <span style=color:#66d9ef>TABLE</span> students <span style=color:#66d9ef>ADD</span> <span style=color:#66d9ef>UNIQUE</span> <span style=color:#66d9ef>INDEX</span> <span style=color:#a6e22e>idx_name_gender_age</span> (name, gender, age);
</span></span></code></pre></div><p>æ³¨æ„è¿™ä¸ª<code>IGNORE</code>ï¼Œç”±äºè¡¨é‡Œé¢å·²ç»æœ‰é‡å¤è®°å½•äº†ï¼Œæ‰€ä»¥ç›´æ¥åˆ›å»ºä¼šå‡ºç°é”™è¯¯ã€‚æ‰§è¡Œä¹‹åï¼Œæ‰€æœ‰çš„é‡å¤è®°å½•éƒ½ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼ˆåªä¿ç•™ä¸€æ¡ï¼‰ï¼Œè€Œä¸”ä»¥åä¹Ÿæ— æ³•æ’å…¥é‡å¤è®°å½•äº†ã€‚</p><h3 id=è‡ªå…³è”>è‡ªå…³è”<a hidden class=anchor aria-hidden=true href=#è‡ªå…³è”>#</a></h3><p>å¦‚æœä½ æ²¡æœ‰ä¿®æ”¹æ•°æ®åº“ç»“æ„çš„æƒé™ï¼Œé‚£ä¸‹é¢è¿™æ¡è‚¯å®šé€‚åˆä½ </p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>DELETE</span> <span style=color:#f92672>`</span>a<span style=color:#f92672>`</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>`</span>students<span style=color:#f92672>`</span> <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span>a<span style=color:#f92672>`</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>`</span>students<span style=color:#f92672>`</span> <span style=color:#66d9ef>AS</span> <span style=color:#f92672>`</span>b<span style=color:#f92672>`</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>-- IMPORTANT: Ensures one version remains
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>-- Change &#34;ID&#34; to your unique column&#39;s name
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#f92672>`</span>a<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>id<span style=color:#f92672>`</span> <span style=color:#f92672>&gt;</span> <span style=color:#f92672>`</span>b<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>id<span style=color:#f92672>`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>-- Any duplicates you want to check for
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>AND</span> (<span style=color:#f92672>`</span>a<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>name<span style=color:#f92672>`</span> <span style=color:#f92672>=</span> <span style=color:#f92672>`</span>b<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>name<span style=color:#f92672>`</span> <span style=color:#66d9ef>OR</span> <span style=color:#f92672>`</span>a<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>name<span style=color:#f92672>`</span> <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>AND</span> <span style=color:#f92672>`</span>b<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>name<span style=color:#f92672>`</span> <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>AND</span> (<span style=color:#f92672>`</span>a<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>gender<span style=color:#f92672>`</span> <span style=color:#f92672>=</span> <span style=color:#f92672>`</span>b<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>gender<span style=color:#f92672>`</span> <span style=color:#66d9ef>OR</span> <span style=color:#f92672>`</span>a<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>gender<span style=color:#f92672>`</span> <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>AND</span> <span style=color:#f92672>`</span>b<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>gender<span style=color:#f92672>`</span> <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>AND</span> (<span style=color:#f92672>`</span>a<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>age<span style=color:#f92672>`</span> <span style=color:#f92672>=</span> <span style=color:#f92672>`</span>b<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>age<span style=color:#f92672>`</span> <span style=color:#66d9ef>OR</span> <span style=color:#f92672>`</span>a<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>age<span style=color:#f92672>`</span> <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>AND</span> <span style=color:#f92672>`</span>b<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>age<span style=color:#f92672>`</span> <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span>);
</span></span></code></pre></div><p>è¿™æ ·ï¼Œå°±ä¼šåªä¿ç•™idæœ€å°çš„é‚£ä¸€æ¡è®°å½•äº†ã€‚</p><h3 id=å¤åˆ¶è¡¨>å¤åˆ¶è¡¨<a hidden class=anchor aria-hidden=true href=#å¤åˆ¶è¡¨>#</a></h3><p>åˆ›å»ºä¸€ä¸ªè¡¨ç»“æ„å®Œå…¨ä¸€æ ·çš„æ–°è¡¨<code>students_copy</code>ï¼Œå–å‡ºåŸè¡¨ä¸­ä¸é‡å¤çš„è®°å½•ï¼Œå¡å…¥è¿™ä¸ªæ–°è¡¨ä¸­ï¼Œå°†æ—§è¡¨æ”¹åæˆ–åˆ é™¤ï¼Œå°†æ–°è¡¨æ”¹ä¸º<code>students</code>ã€‚</p><h3 id=æ€»ç»“>æ€»ç»“<a hidden class=anchor aria-hidden=true href=#æ€»ç»“>#</a></h3><p>èƒ½æ”¹è¡¨ç»“æ„çš„è¯æˆ‘é€‰ç¬¬ä¸€ç§ï¼Œä¸èƒ½çš„è¯æˆ‘é€‰ç¬¬äºŒç§ğŸ˜…ï¼Œä¸ç®¡å“ªä¸€ç§ï¼Œæ“ä½œå‰åŠ¡å¿…åšå¥½æ•°æ®å¤‡ä»½ğŸ¤£ã€‚</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://wksama.github.io/tags/mysql/>MySQL</a></li></ul><nav class=paginav><a class=prev href=https://wksama.github.io/posts/sort.sort%E6%BA%90%E7%A0%81/><span class=title>Â« Prev Page</span><br><span>Golangæ’åº</span>
</a><a class=next href=https://wksama.github.io/posts/%E5%85%B3%E4%BA%8Ecsrf%E4%B8%8E%E8%A1%A8%E5%8D%95%E9%87%8D%E5%A4%8D%E6%8F%90%E4%BA%A4/><span class=title>Next Page Â»</span><br><span>å…³äºCSRFä¸è¡¨å•é‡å¤æäº¤</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://wksama.github.io/>wenkechen</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>